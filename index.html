<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prime Estates - Real Estate Solutions</title>
 <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- NAV -->
  <nav class="navbar">
    <ul class="nav-menu">
      <li><a href="index.html" class="active">Home</a></li>
      <li><a href="Properties.html">Properties</a></li>
      <li><a href="About us.html">About us</a></li>
      <li><a href="Contact.html">Contact</a></li>
      <li><a href="News.html">News</a></li>
      <li><a href="Services.html">Services</a></li>
    </ul>
  </nav>

  <!-- HERO -->
  <header class="hero">
    <h1>Welcome to Prime Estates</h1>
    <p class="lead">Your trusted real estate partner — whether you're buying, selling, renting or investing.</p>
    <a href="Properties.html" class="btn">Explore Properties</a>
  </header>

  <h3>About Us</h3>
  <p class="lead">Prime Estates is committed to helping you find your dream property. Whether you are looking to buy, sell, or invest, we provide personalized service and expert knowledge in the real estate industry.</p>

  <h3>Featured Properties</h3>
  <div class="gallery">
    <div class="property-card">
      <img src="https://i.ytimg.com/vi/B56pik49Y5s/hq720.jpg" alt="Modern Apartment">
      <h4>Modern Apartment</h4>
      <p>2 Bedroom, 2 Bath — Kes 8.5M</p>
    </div>
    <div class="property-card">
      <img src="https://images.squarespace-cdn.com/content/v1/551b0ebce4b0d35570ce6f0b/1622572585987-Z0QKXGMI5A9BKJC70UOO/SchmittleinFacade.JPG" alt="Luxury Villa">
      <h4>Luxury Villa</h4>
      <p>4 Bedroom, Ocean View — Kes 25M</p>
    </div>
    <div class="property-card">
      <img src="https://www.bellacollina.com/hubfs/Real%20Estate/Custom%20Built%20Homes.jpg" alt="Mansion">
      <h4>Mansion</h4>
      <p>5 Bedroom Estate — Kes 40M</p>
    </div>
  </div>

  <!-- ===== Replaced: Steps → Footer (copied EXACTLY from Properties page) ===== -->

  <!-- Steps (above table) -->
  <section class="reveal" aria-labelledby="steps-title">
    <h3 id="steps-title">Steps to Buy a Property</h3>
    <ol style="max-width:720px;margin:10px auto 20px;padding-left:1.1rem;color:#333">
      <li>Browse available properties</li>
      <li>Schedule a property viewing</li>
      <li>Negotiate price and terms</li>
      <li>Sign contract and finalize the deal</li>
    </ol>
  </section>

  <!-- Availability table -->
  <section class="reveal" aria-labelledby="availability-title">
    <h3 id="availability-title">Property Availability Table</h3>
    <div class="table-wrap">
      <table aria-describedby="availability-title">
        <thead>
          <tr><th>Type</th><th>Bedrooms</th><th>Price</th><th>Status</th></tr>
        </thead>
        <tbody>
          <tr><td>Apartment</td><td>2</td><td>Kes 8.5M</td><td>Available</td></tr>
          <tr><td>Villa</td><td>4</td><td>Kes 25M</td><td>Sold</td></tr>
          <tr><td>Office</td><td>-</td><td>Kes 150K/month</td><td>Available</td></tr>
          <tr><td>Townhouse</td><td>3</td><td>Kes 12M</td><td>Pending</td></tr>
          <tr><td>Land</td><td>-</td><td>Kes 2M</td><td>Available</td></tr>
          <tr><td>Mansion</td><td>5</td><td>Kes 40M</td><td>Available</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Video God Mode section -->
  <section class="reveal" aria-labelledby="videos-title">
    <h3 id="videos-title">Property Video Tours</h3>

    <div class="video-section">
      <div class="player-wrap" aria-hidden="false">
        <!-- Player container (YouTube iframe will be created here) -->
        <div class="player-container" id="player-container" aria-live="polite">
          <!-- placeholder shown until player loads -->
          <div class="placeholder">Loading video…</div>
          <div id="yt-player" style="width:100%;height:100%;"></div>
        </div>
      </div>

      <div class="player-controls" aria-label="Video player controls">
        <button id="prev-video" title="Previous">Prev</button>
        <button id="play-pause" title="Play/Pause">Pause</button>
        <button id="next-video" title="Next">Next</button>
        <button id="mute-toggle" title="Mute/Unmute">Mute</button>
      </div>

      <!-- thumbnails / dots -->
      <div class="video-thumbs" id="video-thumbs" aria-label="Video thumbnails">
        <!-- thumbnails will be built from playlist below -->
      </div>

      <!-- small dot indicators (for accessibility / clarity) -->
      <div class="dots" id="video-dots" aria-hidden="true"></div>
    </div>
  </section>

  <!-- Contact -->
  <section class="reveal" aria-labelledby="contact-title">
    <h3 id="contact-title">Contact Us</h3>
    <p class="lead">Email: <a href="mailto:info@primeestates.co.ke">info@primeestates.co.ke</a> &nbsp; | &nbsp; Phone: +254 719 719 178</p>
  </section>

  <hr />
  <footer style="padding:18px;text-align:center;color:var(--muted)">
    <p>&copy; 2025 Prime Estates | Designed with HTML &amp; CSS</p>
  </footer>

  <!-- Lightbox (from Properties page) -->
  <div id="lightbox" aria-hidden="true" style="display:none;align-items:center;justify-content:center;position:fixed;inset:0;background:rgba(2,6,18,0.9);z-index:1600">
    <button id="lb-prev" aria-label="Previous" style="position:fixed;left:18px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.06);border:0;padding:10px;border-radius:10px;color:var(--light)">◀</button>
    <img id="lb-image" src="" alt="" style="max-width:92%;max-height:86%;border-radius:8px;box-shadow:0 28px 80px rgba(2,6,18,0.9)"/>
    <button id="lb-next" aria-label="Next" style="position:fixed;right:18px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.06);border:0;padding:10px;border-radius:10px;color:var(--light)">▶</button>
    <button id="lb-close" aria-label="Close" style="position:fixed;right:18px;top:18px;background:rgba(255,255,255,0.06);border:0;padding:8px;border-radius:10px;color:var(--light)">✕</button>
  </div>

  <!-- Scripts (copied from Properties page for Steps→Footer functionality) -->
  <script>
    /* ---------- kept site scripts: nav highlight, reveal, lightbox ---------- */
    (function navHighlight(){
      const links=document.querySelectorAll('.nav-menu a');
      const path=location.pathname.split('/').pop().toLowerCase()||'properties.html';
      links.forEach(a=>{
        const href=(a.getAttribute('href')||'').split('/').pop().toLowerCase();
        if(href===path || (href==='properties.html' && (path===''||path==='properties.html'))) a.classList.add('active');
      });
    })();

    function initReveal(){
      const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            entry.target.classList.add('in-view');
            obs.unobserve(entry.target);
          }
        });
      }, { threshold: 0.12 });
      document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    }

    function initLightbox(){
      const galleryImgs = Array.from(document.querySelectorAll('.gallery img'));
      const lb = document.getElementById('lightbox');
      const lbImage = document.getElementById('lb-image');
      const lbClose = document.getElementById('lb-close');
      const lbNext = document.getElementById('lb-next');
      const lbPrev = document.getElementById('lb-prev');
      let currentIndex = 0;

      function openLightbox(idx){
        const img = galleryImgs[idx];
        if(!img) return;
        lbImage.src = img.src;
        lbImage.alt = img.alt || 'Property image';
        lb.style.display = 'flex';
        lb.setAttribute('aria-hidden','false');
        currentIndex = idx;
        document.body.style.overflow = 'hidden';
      }
      function closeLightbox(){
        lb.style.display = 'none';
        lb.setAttribute('aria-hidden','true');
        lbImage.src = '';
        document.body.style.overflow = '';
      }
      function showNext(){ currentIndex = (currentIndex + 1) % galleryImgs.length; openLightbox(currentIndex); }
      function showPrev(){ currentIndex = (currentIndex - 1 + galleryImgs.length) % galleryImgs.length; openLightbox(currentIndex); }

      galleryImgs.forEach((img, idx) => {
        img.addEventListener('click', () => openLightbox(idx));
        img.parentElement.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openLightbox(idx); } });
      });

      lbClose.addEventListener('click', closeLightbox);
      lbNext.addEventListener('click', showNext);
      lbPrev.addEventListener('click', showPrev);
      lb.addEventListener('click', (e)=>{ if(e.target === lb) closeLightbox(); });
      document.addEventListener('keydown', (e) => {
        if(lb.style.display === 'flex'){
          if(e.key === 'Escape') closeLightbox();
          if(e.key === 'ArrowRight') showNext();
          if(e.key === 'ArrowLeft') showPrev();
        }
      });
    }

    /* ---------- YouTube God Mode: playlist + fade + thumbnails + controls ---------- */

    // The playlist (your original video first, then 5 Kenya house videos)
    const playlist = [
      'zSGnjq-xrVw',  // your original
      'Pt5N83BbZwY',  // Kiambu mansion
      'rn15MJh00Cw',  // Karen mansion
      'jxIb6A395FU',  // 2-bedroom Nairobi
      'tBvy-JLViK8',  // Nairobi mansion full tour
      'IGeChLrGbAo'   // Eastern Bypass mansion
    ];

    let ytPlayer, currentIdx = 0, isMuted = true, isPlaying = false;
    const playerContainer = document.getElementById('player-container');
    const thumbsEl = document.getElementById('video-thumbs');
    const dotsEl = document.getElementById('video-dots');

    // Build thumbnails and dots dynamically
    function buildThumbnails(){
      playlist.forEach((id, i) => {
        const thumb = document.createElement('button');
        thumb.className = 'thumb';
        thumb.dataset.idx = i;
        thumb.setAttribute('aria-label', `Play video ${i+1}`);
        thumb.innerHTML = `<img loading="lazy" src="https://img.youtube.com/vi/${id}/hqdefault.jpg" alt="Video ${i+1} thumbnail">`;
        thumbsEl.appendChild(thumb);

        // dots
        const dot = document.createElement('div');
        dot.className = 'dot';
        if(i===0) dot.classList.add('active');
        dotsEl.appendChild(dot);
      });
    }

    // Load YouTube API
    (function loadYouTubeAPI(){
      const tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      const first = document.getElementsByTagName('script')[0];
      first.parentNode.insertBefore(tag, first);
    })();

    // Called by YT API
    function onYouTubeIframeAPIReady(){
      ytPlayer = new YT.Player('yt-player', {
        height: '100%',
        width: '100%',
        videoId: playlist[0],
        playerVars: {
          autoplay: 0,
          controls: 1,
          rel: 0,
          modestbranding: 1,
          playsinline: 1
        },
        events: {
          onReady: onPlayerReady,
          onStateChange: onPlayerStateChange
        }
      });
    }

    function onPlayerReady(){
      // mute by default so autoplay is permitted in most browsers
      try{ ytPlayer.mute(); isMuted = true; document.getElementById('mute-toggle').textContent = 'Mute'; } catch(e){}
      // hide placeholder
      const ph = playerContainer.querySelector('.placeholder');
      if(ph) ph.style.display = 'none';
      // attempt autoplay when section is visible
      attachAutoStart();
      updateActiveThumb();
    }

    function onPlayerStateChange(e){
      // when video ends, fade to next
      if(e.data === YT.PlayerState.ENDED){
        fadeToNext();
      } else if(e.data === YT.PlayerState.PLAYING){
        isPlaying = true;
        document.getElementById('play-pause').textContent = 'Pause';
        updateActiveThumb();
      } else if(e.data === YT.PlayerState.PAUSED){
        isPlaying = false;
        document.getElementById('play-pause').textContent = 'Play';
      }
    }

    // Fade transition: fade out, load next, fade in
    function fadeToIndex(targetIdx){
      targetIdx = (targetIdx + playlist.length) % playlist.length;
      currentIdx = targetIdx;
      playerContainer.classList.add('fade');
      setTimeout(() => {
        ytPlayer.loadVideoById(playlist[currentIdx]);
        if(isMuted) ytPlayer.mute(); else ytPlayer.unMute();
        ytPlayer.playVideo();
        setTimeout(()=> playerContainer.classList.remove('fade'), 60);
        updateActiveThumb();
      }, 700);
    }

    function fadeToNext(){
      fadeToIndex((currentIdx + 1) % playlist.length);
    }
    function fadeToPrev(){
      fadeToIndex((currentIdx - 1 + playlist.length) % playlist.length);
    }

    function updateActiveThumb(){
      const thumbs = document.querySelectorAll('.thumb');
      thumbs.forEach(t => t.classList.remove('active'));
      if(thumbs[currentIdx]) thumbs[currentIdx].classList.add('active');
      const dots = document.querySelectorAll('.dot');
      dots.forEach(d => d.classList.remove('active'));
      if(dots[currentIdx]) dots[currentIdx].classList.add('active');
    }

    function attachControls(){
      document.getElementById('play-pause').addEventListener('click', ()=>{
        if(!ytPlayer) return;
        const state = ytPlayer.getPlayerState();
        if(state === YT.PlayerState.PLAYING){
          ytPlayer.pauseVideo();
        } else {
          ytPlayer.playVideo();
        }
      });
      document.getElementById('next-video').addEventListener('click', ()=>{ fadeToNext(); });
      document.getElementById('prev-video').addEventListener('click', ()=>{ fadeToPrev(); });
      document.getElementById('mute-toggle').addEventListener('click', ()=>{
        if(!ytPlayer) return;
        if(isMuted){
          ytPlayer.unMute(); isMuted = false; document.getElementById('mute-toggle').textContent = 'Unmute';
        } else {
          ytPlayer.mute(); isMuted = true; document.getElementById('mute-toggle').textContent = 'Mute';
        }
      });

      // thumbnail click
      thumbsEl.addEventListener('click', (e)=>{
        const t = e.target.closest('.thumb');
        if(!t) return;
        const i = Number(t.dataset.idx);
        if(Number.isInteger(i)) fadeToIndex(i);
      });
    }

    // Start autoplay only when video section enters viewport (safer UX and browser autoplay rules)
    function attachAutoStart(){
      const vidSection = document.getElementById('videos-title');
      if(!vidSection) return;
      const obs = new IntersectionObserver((entries, o) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            try{
              if(ytPlayer && !isPlaying){
                ytPlayer.mute();
                ytPlayer.playVideo();
                isPlaying = true;
                document.getElementById('play-pause').textContent = 'Pause';
              }
            }catch(e){}
            o.unobserve(vidSection);
          }
        });
      }, {threshold:0.35});
      obs.observe(vidSection);
    }

    // Build UI and wire everything up after DOM ready
    document.addEventListener('DOMContentLoaded', ()=>{
      buildThumbnails();
      attachControls();
      initReveal();
      initLightbox();

      // create dots
      const dotsTarget = document.getElementById('video-dots');
      for(let i=0;i<playlist.length;i++){
        const dot = document.createElement('div');
        dot.className = 'dot' + (i===0 ? ' active' : '');
        dotsTarget.appendChild(dot);
      }

      // keyboard left/right to navigate when player focused
      document.addEventListener('keydown', (e) => {
        if(document.activeElement && document.activeElement.closest && document.activeElement.closest('.player-container')) return;
        if(e.key === 'ArrowRight') fadeToNext();
        if(e.key === 'ArrowLeft') fadeToPrev();
      });
    });

    // Respect reduced motion preference
    if(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
      document.documentElement.classList.add('reduce-motion');
    }
  </script>
</body>
</html>
